<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AUROTA PHOTOGRAPHY</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- Locomotive Scroll CSS -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.css"
  >
  <!-- Your custom CSS (styles) -->
  <link rel="stylesheet" type="text/css" href="style.css" />
  
  <!-- GSAP & ScrollTrigger -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
</head>
<body>
  <!-- Locomotive Scroll Container -->
  <div data-scroll-container id="smooth-wrapper">

    <!-- NAVIGATION -->
    <nav class="navbar">
      <div class="logo">Aurora</div>
      <ul class="nav-link">
        <li><a href="#">Home</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Journal</a></li>
        <li><a href="#">Contact</a></li>
        <li><a href="#">Studio</a></li>
      </ul>
      <div class="social">
        <a href="#"><img src="facebook.png" alt="facebook" /></a>
        <a href="#"><img src="instagram.png" alt="instagram" /></a>
        <a href="#"><img src="twitter.png" alt="twitter" /></a>
      </div>
    </nav>

    <!-- SECTION 1: Hero -->
    <section class="section-hero">
      <div class="hero-content">
        <div class="hero">
          <h1 class="hero-1"> CREATE IMPACT </h1>
          <div class="sub2-container">
            <hr>  
            <p> &nbsp SCROLL & EXPLORE  &nbsp  </p>  
            <hr>
          </div>
        </div>
      </div>
    </section>

    <!-- SECTION 2: Expandable Video -->
    <section class="section-video">
      <div class="text">  We offer prestigious and well organised photography service </div>
      <div class="text2"> Authentically uncover the art of YOU </div>
      <div class="video-block">
        <div class="video-block__container">
          <figure class="video">
            <video
              autoplay
              loop
              muted
              playsinline
              src="/Project-2/aset/mixkit-people-pouring-a-warm-drink-around-a-campfire-513-full-hd.mp4"
            ></video>
            <figcaption class="video__caption"style="left: 45%; top: 50%;" >
              <span class="mid"> FILM THE MOMMENT </span>
            </figcaption>
            <figcaption class="video__caption" style="left: 24px; bottom: 12px;">
              <span>Capture the world through lens</span>
            </figcaption>
          </figure>
        </div>
      </div>
    
    </section>

    <!-- SECTION 3: End Content -->
    <section class="section-end">
      <div class="box-container">
        <div class="img">
          <image class="fullpage" src="/Project-2/aset/alexander-dummer-aS4Duj2j7r4-unsplash.jpg" alt="aurora" />
        </div>
        <div class="box-1">
         <div class="heading"> <h1>BOOK With </h1> </div>
         <div class="subheading"> <p>It represents a lorem ispum journey of exploration and discovery, pushing the boundaries of creativity and technology. Through this piece, a vision is expressed and ideas are communicated that might be difficult to convey through words alone. The collaboration with artificial intelligence adds a layer of unpredictability and innovation, making each creation a unique fusion of human intuition and machine-generated creativity.</p>
        
        </div></div>

        <div class="end">
          <p> Pure HTML/CSS and Js script</p>
        </div>
      </div>
    </section>

  </div> <!-- /#smooth-wrapper -->
  </body>
  <script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.js"></script>

  <!-- Main JS for GSAP + ScrollTrigger -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      /* 1) Initialize Locomotive Scroll */
      const locoScroll = new LocomotiveScroll({
        el: document.querySelector('[data-scroll-container]'),
        smooth: true
      });

      /* 2) Setup GSAP ScrollTrigger to sync with Locomotive */
      gsap.registerPlugin(ScrollTrigger);
      ScrollTrigger.scrollerProxy("#smooth-wrapper", {
        scrollTop(value) {
          return arguments.length
            ? locoScroll.scrollTo(value, 0, 0)
            : locoScroll.scroll.instance.scroll.y;
        },
        getBoundingClientRect() {
          return {
            top: 0,
            left: 0,
            width: window.innerWidth,
            height: window.innerHeight
          };
        },
        pinType: document.querySelector("#smooth-wrapper").style.transform
          ? "transform"
          : "fixed"
      });

      locoScroll.on("scroll", ScrollTrigger.update);
      ScrollTrigger.addEventListener("refresh", () => locoScroll.update());
      ScrollTrigger.refresh();

      /* 3) Expandable Video Logic */
      const expandableVideoBlock = () => {
        // We use a custom CSS var for max container width
        const maxWidth = parseInt(
          getComputedStyle(document.documentElement)
            .getPropertyValue('--container-width')
        ) || 800;  // fallback if var not found
        const gap = 24;

        // Grab elements
        const element   = document.querySelector(".video-block");
        if (!element) return; // If .video-block doesn't exist, stop

        const container = element.querySelector(".video-block__container");
        const figure    = element.querySelector("figure.video");
        const video     = element.querySelector("video");
        const captions  = figure.querySelectorAll(".video__caption span");
        const midCaption = document.querySelector(".video__caption .mid");

        // Track video status
        let isPlaying = false;
        video.onplaying = () => (isPlaying = true);
        video.onpause   = () => (isPlaying = false);

        function videoPause() {
          if (video && !video.paused && isPlaying) {
            video.pause();

            // Move captions out of view
            gsap.to(captions, { y: "100%", duration: 0.5, stagger: 0.1 });
          }
        }
        async function videoPlay() {
          if (video && video.paused && !isPlaying) {

            // Bring captions into view
            gsap.to(captions, { y: "0%", duration: 0.5, stagger: 0.1 });
            return await video.play();
          }
        }

        // Returns a dynamic clip-path based on window size
        function getClipPath() {
          let insetX = (window.innerWidth - maxWidth - gap) /3;
          let insetY = (window.innerHeight - maxWidth - gap) / 3;

          if (insetX < gap) insetX = gap;
          if (insetY < gap) insetY = gap;

          return `inset(${insetY}px ${insetX}px)`;
        }

        // Parallax effect on figure while scrolling into view
        gsap.fromTo(
          figure,
          { clipPath: getClipPath, y: "-50%" },
          {
            scrollTrigger: {
              scroller: "#smooth-wrapper", // Locomotive container
              trigger: element,
              start: "top bottom", // top of .video-block hits bottom of viewport
              end: "top top",
              scrub: true
            },
            y: "0%",
            duration: 0.5,
            onStart: () => videoPause()
          }
        );

        // Main timeline: pin the container & animate clip-path
        let tl = gsap.timeline({
          scrollTrigger: {
            scroller: "#smooth-wrapper",
            trigger: container,
            start: "top top",
            end: () => window.innerHeight * 2,
            scrub: true,
            pin: true,
            // markers: true, // Enable if you want to see debug markers
          }
        });
        const headline = document.querySelector(".text");
        const subhead = document.querySelector(".text2");
        tl.to(subhead, { opacity: 1, y: "55%", duration: 0.5 }, ">");
        tl.to(headline, { opacity: 1, y: "55%", duration: 0.5 }, ">");
    tl.to(midCaption, { opacity: 1, y: "55%", duration: 0.5 }, ">"); 
       
        tl.fromTo(
          figure,
          { clipPath: getClipPath },
          {
            clipPath: "inset(0px 0px)",
            duration: 0.5,
            onUpdate: () => videoPause(),
            onComplete: () => videoPlay()
          }
        );

        // Hold the video playing for a moment
        tl.fromTo(
          figure,
          { opacity: 1 },
          {
            opacity: 1,
            duration: 1,
            onUpdate: () => videoPlay(),
            onComplete: () => videoPause()
          }
        );

        // Shrink video block back to clipped
        tl.fromTo(
          figure,
          { clipPath: "inset(0px 0px)" },
          {
            clipPath: getClipPath,
            duration: 0.5
          }
        );
      };

      // Initialize the video expand logic
      expandableVideoBlock();
    });
    gsap.registerPlugin(ScrollTrigger);

// gsap.fromTo(
//   ".section-end",
//   {
//     backgroundColor: "#000000" // starting color (or use: gsap.getProperty("html", "--dark"))
//   },
//   {
//     backgroundColor: "#ffffff", // ending color (or use: gsap.getProperty("html", "--light"))
//     scrollTrigger: {
//       trigger: ".section-end",    // the element that triggers the animation
//       start: "top center",          // when the top of .section-end hits the center of the viewport
//       end: "bottom center",         // when the bottom of .section-end hits the center of the viewport
//       scrub: true,                  // links the animation progress to the scrollbar position
//       markers: true                 // displays markers for debugging (remove in production)
//     }
//   }
// );
  </script>
</html>
